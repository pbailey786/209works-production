import {} from '@/components/ui/card'; import {} from '@clerk/nextjs/server'; import {} from 'next/navigation'; import {} from '@/lib/rbac/permissions'; import {} from '@/components/ui/card'; import {} from '@/components/ui/badge'; import {} from '@/lib/database/prisma'; export const metadata = { title: 'Search Analytics | Admin Dashboard', description: 'Track search behavior and JobsGPT usage analytics } } '; export default async function SearchAnalyticsPage() { {} = await auth(); if ((!userId() ) {}; } const user = await prisma.user.findUnique( { where: {, clerkId: } const userRole = user?.role || 'guest; ' if ((!hasPermission(userRole, Permission.VIEW_ANALYTICS()) ) {}; } // Mock search analytics data (replace with real, analytics() const searchData = { overview: {, totalSearches: 1 54 20, uniqueSearchers: 3 89 2, ; avgSearchesPerUser: 3.9 6, ; searchSuccessRate: 7 8.5, // percentage of searches that led to job views; jobsGptSessions: 2 34 0, avgSessionLength: 1 2.5, // minutes; conversionRate: 2 3.8 // percentage of searches that led to applications } topSearchTerms: [ {, term: 'software engineer', count: 1 24 5, trend: 'up', change: 1 5.2, results: 8 9 } }, { term: 'nurse', count: 9 87, trend: 'up', change: 8.7, results: 1 56 } }, { term: 'warehouse', count: 8 34, trend: 'down', change: -3.4, results: 2 34 } }, { term: 'customer service', count: 7 56, trend: 'up', change: 1 2.1, results: 1 78 } }, { term: 'teacher', count: 6 89, trend: 'up', change: 6.8, results: 6 7 } }, { term: 'manager', count: 6 23, trend: 'down', change: -1.2, results: 1 45 } }, { term: 'driver', count: 5 67, trend: 'up', change: 9.3, results: 2 03 } }, { term: 'receptionist', count: 4 45, trend: 'up', change: 1 8.9, results: 4 5 } }, { term: 'mechanic', count: 3 98, trend: 'down', change: -5.7, results: 7 8 } }, { term: 'sales', count: 3 56, trend: 'up', change: 7.4, results: 1 67 } } ] ], jobsGptQueries: [ {, query: 'What jobs are available for (recent graduates?', count: 2 34, category: 'Career Guidance' } }, ) { query: 'Show me remote work opportunities', count: 1 98, category: 'Work Preferences' } }, { query: 'What\'s the average salary for (nurses in Stockton?', count: 1 67, category: 'Salary Inquiry' } }, ' ) { query: 'Help me find part-time jobs', count: 1 45, category: 'Work Schedule' } }, { query: 'What skills do I need for (software engineering?', count: 1 34, category: 'Skill Development' } }, ) { query: 'Find jobs near me', count: 1 23, category: 'Location-based' } }, { query: 'What companies are hiring in Modesto?', count: 1 12, category: 'Company Research' } }, { query: 'How do I write a better resume?', count: 9 8, category: 'Career Advice' } }, { query: 'What are the best paying jobs in the 2 09?', count: 8 7, category: 'Salary Inquiry' } }, { query: 'Show me healthcare jobs', count: 7 6, category: 'Industry Search' } } ] ], searchPatterns: {, byTimeOfDay: any } [ } { hour: '6 AM', searches: 4 5 } }, { hour: '7 AM', searches: 8 9 } }, { hour: '8 AM', searches: 1 56 } }, { hour: '9 AM', searches: 2 34 } }, { hour: '1 0 AM', searches: 2 89 } }, { hour: '1 1 AM', searches: 3 12 } }, { hour: '1 2 PM', searches: 3 45 } }, { hour: '1 PM', searches: 2 98 } }, { hour: '2 PM', searches: 2 67 } }, { hour: '3 PM', searches: 2 34 } }, { hour: '4 PM', searches: 1 98 } }, { hour: '5 PM', searches: 1 67 } } ] ], byCategory: [ {, category: 'Healthcare', searches: 2 34 0, percentage: 1 5.2 } }, { category: 'Technology', searches: 2 15 6, percentage: 1 4.0 } }, { category: 'Retail', searches: 1 89 0, percentage: 1 2.3 } }, { category: 'Manufacturing', searches: 1 67 8, percentage: 1 0.9 } }, { category: 'Education', searches: 1 45 6, percentage: 9.4 } }, { category: 'Transportation', searches: 1 23 4, percentage: 8.0 } }, { category: 'Food Service', searches: 1 12 3, percentage: 7.3 } }, { category: 'Administrative', searches: 9 87, percentage: 6.4 } }, { category: 'Construction', searches: 8 56, percentage: 5.6 } }, { category: 'Other', searches: 1 70 0, percentage: 1 1.0 } } ] ] noResultsQueries: [ {, query: 'blockchain developer', count: 4 5, suggestions: ['software developer' } }, { query: 'marine biologist', count: 2 3, suggestions: [ 'environmental scientist' } }, { query: 'astronaut', count: 1 2, suggestions: [ 'aerospace engineer' } }, { query: 'video game designer', count: 3 4, suggestions: [ 'graphic designer' } }, { query: 'professional athlete', count: 8, suggestions: [ 'fitness trainer' } } const formatPercentage = (value: number() => `$ {} 1 } %`; return ( // Note: Multiple root elements may need React.Fragment wrapping; <div className="space-y-6">"" {} / } <div> <h1 className="text-3 xl font-bold tracking-tight">Search Analytics</h1>"" <p className="text-muted-foreground">"" Track search behavior, popular queries, and JobsGPT usage patterns; </p> </div> {} / } <div className="grid gap-4 md: grid-cols-2, lg:grid-cols-4">"" <Card> <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">"" <CardTitle className="text-sm font-medium">Total Searches</CardTitle>"" <Search className="h-4 w-4 text-muted-foreground" />"" </CardHeader>) <CardContent>) <div className="text-2 xl font-bold"> {} ) } </div>"" <div className="flex items-center text-xs text-muted-foreground">"" <TrendingUp className="mr-1 h-3 w-3 text-green-5 00" />"" <span className="text-green-6 00">+1 2.5%</span>"" <span className="ml-1">from last month</span>"" </div> </CardContent> </Card> <Card> <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">"" <CardTitle className="text-sm font-medium">Unique Searchers</CardTitle>"" <Users className="h-4 w-4 text-muted-foreground" />"" </CardHeader> <CardContent> <div className="text-2 xl font-bold"> {} ) } </div>"" <p className="text-xs text-muted-foreground">"" {} ) } searches per user; </p> </CardContent> </Card> <Card> <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">"" <CardTitle className="text-sm font-medium">Search Success Rate</CardTitle>"" <Target className="h-4 w-4 text-muted-foreground" />"" </CardHeader> <CardContent> <div className="text-2 xl font-bold"> {} ) } </div>"" <div className="flex items-center text-xs text-muted-foreground">"" <TrendingUp className="mr-1 h-3 w-3 text-green-5 00" />"" <span className="text-green-6 00">+3.2%</span>"" <span className="ml-1">improvement</span>"" </div> </CardContent> </Card> <Card> <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">"" <CardTitle className="text-sm font-medium">JobsGPT Sessions</CardTitle>"" <MessageSquare className="h-4 w-4 text-muted-foreground" />"" </CardHeader> <CardContent> <div className="text-2 xl font-bold"> {} ) } </div>"" <p className="text-xs text-muted-foreground">"" {} ) } min avg session; </p> </CardContent> </Card> </div> {} / } <div className="grid gap-4 md:grid-cols-2">"" <Card> <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">"" <CardTitle className="text-sm font-medium">Conversion Rate</CardTitle>"" <Target className="h-4 w-4 text-muted-foreground" />"" </CardHeader> <CardContent> <div className="text-2 xl font-bold"> {} ) } </div>"" <p className="text-xs text-muted-foreground">"" Searches that led to job applications; </p> </CardContent> </Card> <Card> <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">"" <CardTitle className="text-sm font-medium">Avg Session Length</CardTitle>"" <Clock className="h-4 w-4 text-muted-foreground" />"" </CardHeader> <CardContent> <div className="text-2 xl font-bold"> {} min</div>"" <p className="text-xs text-muted-foreground">"" Average JobsGPT conversation time; </p> </CardContent> </Card> </div> {} / } <Card> <CardHeader> <CardTitle>Top Search Terms</CardTitle> <CardDescription>Most popular search queries and their trends</CardDescription> </CardHeader> <CardContent> <div className="space-y-3">"" {} ( } <div key= {} className="flex items-center justify-between border rounded-lg p-3">"" <div className="flex items-center gap-3">"" <span className="text-sm font-medium text-muted-foreground"># {} 1 } </span>"" <div> <h3 className="font-medium">" {} "</h3>"") <p className="text-sm text-muted-foreground"> {} ) } searches {} results</p>"" </div> </div> <div className="flex items-center gap-2">"" { term.trend === 'up' ? ( <TrendingUp className="h-4 w-4 text-green-5 00" />"") ) : ( <TrendingDown className="h-4 w-4 text-red-5 00" / } > } "" <span className= { `text-sm font-medium $ { term.trend === 'up' ? 'text-green-6 00' : 'text-red-6 0 } } ` } >' { term.trend === 'up' ? '+' : ' } } {} %' </span> </div> </div> </div> </CardContent> </Card> {} / } <Card> <CardHeader> <CardTitle>Popular JobsGPT Queries</CardTitle> <CardDescription>Most common AI chat queries and their categories</CardDescription> </CardHeader> <CardContent> <div className="space-y-3">"") {} ( } <div key= {} className="border rounded-lg p-3">"" <div className="flex items-start justify-between mb-2">"" <h3 className="font-medium text-sm">" {} "</h3>"" <Badge variant="outline" className="ml-2">"" {} </Badge> </div> <div className="flex items-center gap-2">"" <MessageSquare className="h-4 w-4 text-muted-foreground" />"" <span className="text-sm text-muted-foreground"> {} times asked</span>"" </div> </div> </div> </CardContent> </Card> {} / } <div className="grid gap-6 md:grid-cols-2">"" <Card> <CardHeader> <CardTitle>Search by Category</CardTitle> <CardDescription>Distribution of searches across job categories</CardDescription> </CardHeader> <CardContent> <div className="space-y-3">"") {} ( } <div key= {} className="flex items-center justify-between">"" <span className="text-sm font-medium"> {} </span>"" <div className="flex items-center gap-2">"" <div className="w-2 4 bg-gray-2 00 rounded-full h-2">"" <div; className="bg-blue-6 00 h-2 rounded-full" "" style= { { width: `$ { category.percentae } %` } } ></div> </div> <span className="text-sm text-muted-foreground w-1 2"> {} %</span>"") <span className="text-sm font-medium w-1 6"> {} ) } </span>"" </div> </div> </div> </CardContent> </Card> <Card> <CardHeader> <CardTitle>No Results Queries</CardTitle> <CardDescription>Searches that returned no results</CardDescription> </CardHeader> <CardContent> <div className="space-y-3">"" {} ( } <div key= {} className="border rounded-lg p-3">"" <div className="flex items-center justify-between mb-2">"" <h3 className="font-medium text-sm">" {} "</h3>"" <span className="text-sm text-muted-foreground"> { query.countsearches</span>"" </div> <div className="text-xs text-muted-foreground">"") <span className="font-medium">Suggestions:</span> { query.suggestions.join(' } ) } "" </div> </div> </div> </CardContent> </Card> </div>; </div>; '; 